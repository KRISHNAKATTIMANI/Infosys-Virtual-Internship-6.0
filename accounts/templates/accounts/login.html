{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login â€” AI Quiz Hub</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.0.0/fonts/remixicon.css"
      rel="stylesheet"
    />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        min-height: 100vh;
        display: flex;
        background: #f8fafc;
        overflow: hidden;
      }

      /* Left Side - Decorative Panel */
      .left-panel {
        flex: 1;
        background: linear-gradient(135deg, #1e3a5f 0%, #1e293b 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 4rem;
        position: relative;
        overflow: hidden;
      }

      .left-panel::before {
        content: '';
        position: absolute;
        inset: 0;
        background: 
          radial-gradient(circle at 30% 20%, rgba(59, 130, 246, 0.2) 0%, transparent 50%),
          radial-gradient(circle at 70% 80%, rgba(245, 158, 11, 0.15) 0%, transparent 50%),
          radial-gradient(circle at 50% 50%, rgba(251, 191, 36, 0.1) 0%, transparent 50%);
      }

      /* Floating Elements */
      .floating-element {
        position: absolute;
        border-radius: 50%;
        filter: blur(1px);
        animation: float 6s ease-in-out infinite;
      }

      .float-1 {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.4), rgba(245, 158, 11, 0.3));
        top: 15%;
        left: 20%;
        animation-delay: 0s;
      }

      .float-2 {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, rgba(251, 191, 36, 0.4), rgba(59, 130, 246, 0.3));
        top: 60%;
        right: 15%;
        animation-delay: -2s;
      }

      .float-3 {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.5), rgba(251, 191, 36, 0.4));
        bottom: 20%;
        left: 30%;
        animation-delay: -4s;
      }

      .float-4 {
        width: 100px;
        height: 100px;
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(96, 165, 250, 0.2));
        top: 40%;
        left: 10%;
        animation-delay: -1s;
      }

      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        33% { transform: translateY(-20px) rotate(5deg); }
        66% { transform: translateY(10px) rotate(-3deg); }
      }

      .brand-content {
        position: relative;
        z-index: 10;
        text-align: center;
        color: white;
      }

      .brand-logo {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        margin-bottom: 2rem;
      }

      .brand-logo i {
        font-size: 3rem;
        background: linear-gradient(135deg, #f59e0b, #fbbf24);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .brand-name {
        font-family: 'Poppins', sans-serif;
        font-size: 2rem;
        font-weight: 800;
        color: #ffffff;
      }

      .brand-tagline {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1rem;
        line-height: 1.4;
        color: #f8fafc;
      }

      .brand-description {
        color: #94a3b8;
        font-size: 1rem;
        max-width: 400px;
        line-height: 1.7;
      }

      /* Feature Pills */
      .feature-pills {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        justify-content: center;
        margin-top: 2.5rem;
      }

      .feature-pill {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.625rem 1rem;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 9999px;
        font-size: 0.875rem;
        color: #e2e8f0;
        backdrop-filter: blur(10px);
      }

      .feature-pill i {
        color: #fbbf24;
      }

      /* Right Side - Login Form */
      .right-panel {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2rem;
        background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 50%, #e2e8f0 100%);
        position: relative;
      }

      .right-panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 0% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 50%);
      }

      .login-container {
        width: 100%;
        max-width: 420px;
        position: relative;
        z-index: 10;
      }

      .login-card {
        background: #ffffff;
        border: 1px solid #e2e8f0;
        border-radius: 1.5rem;
        padding: 2.5rem;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.08);
        animation: slideUp 0.6s ease forwards;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .login-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .login-header h1 {
        font-family: 'Poppins', sans-serif;
        font-size: 1.75rem;
        font-weight: 700;
        color: #1e293b;
        margin-bottom: 0.5rem;
      }

      .login-header p {
        color: #64748b;
        font-size: 0.95rem;
      }

      /* Toast Notifications - Fixed at top of screen */
      .toast-container {
        position: fixed;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        padding: 1rem;
        pointer-events: none;
      }

      .toast-message {
        background: linear-gradient(135deg, #10b981, #059669);
        border-radius: 0.75rem;
        padding: 1rem 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        box-shadow: 0 10px 40px rgba(16, 185, 129, 0.3);
        animation: slideDown 0.5s ease forwards, fadeOut 0.5s ease 4s forwards;
        pointer-events: auto;
        min-width: 300px;
        max-width: 500px;
      }

      .toast-message.success {
        background: linear-gradient(135deg, #10b981, #059669);
        box-shadow: 0 10px 40px rgba(16, 185, 129, 0.3);
      }

      .toast-message.info {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        box-shadow: 0 10px 40px rgba(59, 130, 246, 0.3);
      }

      .toast-message.warning {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        box-shadow: 0 10px 40px rgba(245, 158, 11, 0.3);
      }

      .toast-message.error {
        background: linear-gradient(135deg, #ef4444, #dc2626);
        box-shadow: 0 10px 40px rgba(239, 68, 68, 0.3);
      }

      @keyframes slideDown {
        0% {
          transform: translateY(-100%);
          opacity: 0;
        }
        100% {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          visibility: hidden;
        }
      }

      .toast-message i {
        color: white;
        font-size: 1.25rem;
      }

      .toast-message span {
        color: white;
        font-weight: 500;
        font-size: 0.95rem;
      }

      /* Error Message (for form errors only) */
      .error-message {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.2);
        border-radius: 0.75rem;
        padding: 1rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: flex-start;
        gap: 0.75rem;
        animation: shake 0.5s ease;
      }

      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }

      .error-message i {
        color: #ef4444;
        font-size: 1.25rem;
        margin-top: 0.125rem;
      }

      .error-message-text {
        flex: 1;
      }

      .error-message-text strong {
        color: #dc2626;
        font-weight: 600;
        display: block;
        margin-bottom: 0.25rem;
      }

      .error-message-text span {
        color: #ef4444;
        font-size: 0.875rem;
      }

      /* Form Styles */
      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-label {
        display: block;
        color: #1e293b;
        font-size: 0.875rem;
        font-weight: 500;
        margin-bottom: 0.5rem;
      }

      .input-wrapper {
        position: relative;
      }

      .input-wrapper i {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #94a3b8;
        font-size: 1.1rem;
        transition: color 0.3s ease;
      }

      .form-input {
        width: 100%;
        padding: 0.875rem 1rem 0.875rem 2.75rem;
        background: #f8fafc;
        border: 2px solid #e2e8f0;
        border-radius: 0.75rem;
        font-size: 1rem;
        color: #1e293b;
        transition: all 0.3s ease;
        outline: none;
      }

      .form-input::placeholder {
        color: #94a3b8;
      }

      .form-input:hover {
        border-color: #cbd5e1;
      }

      .form-input:focus {
        border-color: #3b82f6;
        background: #ffffff;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.15);
      }

      .form-input:focus + i,
      .input-wrapper:focus-within i {
        color: #3b82f6;
      }

      /* Password Toggle */
      .password-toggle {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: #94a3b8;
        cursor: pointer;
        padding: 0.25rem;
        transition: color 0.3s ease;
      }

      .password-toggle:hover {
        color: #64748b;
      }

      /* Submit Button */
      .btn-submit {
        width: 100%;
        padding: 1rem;
        background: linear-gradient(135deg, #3b82f6 0%, #1e3a5f 100%);
        border: none;
        border-radius: 0.75rem;
        color: #ffffff;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
      }

      .btn-submit::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s ease;
      }

      .btn-submit:hover::before {
        left: 100%;
      }

      .btn-submit:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(59, 130, 246, 0.4);
      }

      .btn-submit:active {
        transform: translateY(0);
      }

      /* Footer Link */
      .login-footer {
        text-align: center;
        margin-top: 1.5rem;
        color: #64748b;
        font-size: 0.95rem;
      }

      .login-footer a {
        color: #3b82f6;
        text-decoration: none;
        font-weight: 600;
        transition: color 0.3s ease;
      }

      .login-footer a:hover {
        color: #1e3a5f;
        text-decoration: underline;
      }

      /* Back to Home */
      .back-link {
        position: absolute;
        top: 2rem;
        left: 2rem;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: #64748b;
        text-decoration: none;
        font-size: 0.875rem;
        transition: color 0.3s ease;
      }

      .back-link:hover {
        color: #3b82f6;
      }

      /* Responsive */
      @media (max-width: 1024px) {
        .left-panel {
          display: none;
        }
        
        .right-panel {
          flex: 1;
        }
      }

      @media (max-width: 480px) {
        .login-card {
          padding: 1.5rem;
        }
        
        .right-panel {
          padding: 1rem;
        }
      }
    </style>
  </head>

  <body>
    <!-- Toast Notifications - Fixed at top -->
    {% if messages %}
    <div class="toast-container">
      {% for message in messages %}
      <div class="toast-message {% if message.tags %}{{ message.tags }}{% else %}success{% endif %}">
        {% if 'error' in message.tags %}
          <i class="ri-error-warning-line"></i>
        {% elif 'warning' in message.tags %}
          <i class="ri-alert-line"></i>
        {% elif 'info' in message.tags %}
          <i class="ri-information-line"></i>
        {% else %}
          <i class="ri-checkbox-circle-line"></i>
        {% endif %}
        <span>{{ message }}</span>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Left Panel -->
    <div class="left-panel">
      <div class="floating-element float-1"></div>
      <div class="floating-element float-2"></div>
      <div class="floating-element float-3"></div>
      <div class="floating-element float-4"></div>

      <div class="brand-content">
        <div class="brand-logo">
          <i class="ri-brain-line"></i>
          <span class="brand-name">AI Quiz Hub</span>
        </div>
        <h2 class="brand-tagline">Learn Smarter,<br>Test Smarter</h2>
        <p class="brand-description">
          Experience the future of learning with AI-powered quizzes, 
          instant feedback, and personalized insights to accelerate your growth.
        </p>
        
        <div class="feature-pills">
          <span class="feature-pill">
            <i class="ri-robot-line"></i>
            AI-Generated Questions
          </span>
          <span class="feature-pill">
            <i class="ri-line-chart-line"></i>
            Performance Analytics
          </span>
          <span class="feature-pill">
            <i class="ri-trophy-line"></i>
            Leaderboards
          </span>
        </div>
      </div>
    </div>

    <!-- Right Panel -->
    <div class="right-panel">
      <a href="{% url 'home' %}" class="back-link">
        <i class="ri-arrow-left-line"></i>
        Back to Home
      </a>

      <div class="login-container">
        <div class="login-card">
          <div class="login-header">
            <h1>Welcome Back</h1>
            <p>Sign in to continue your learning journey</p>
          </div>

          {% if form.errors %}
          <div class="error-message">
            <i class="ri-error-warning-line"></i>
            <div class="error-message-text">
              <strong>Login Failed</strong>
              <span>The username or password you entered is incorrect.</span>
            </div>
          </div>
          {% endif %}

          <form method="POST">
            {% csrf_token %}

            <div class="form-group">
              <label class="form-label">Username</label>
              <div class="input-wrapper">
                <input
                  type="text"
                  name="username"
                  class="form-input"
                  placeholder="Enter your username"
                  required
                  autocomplete="username"
                />
                <i class="ri-user-line"></i>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label">Password</label>
              <div class="input-wrapper">
                <input
                  type="password"
                  name="password"
                  id="password"
                  class="form-input"
                  placeholder="Enter your password"
                  required
                  autocomplete="current-password"
                />
                <i class="ri-lock-line"></i>
                <button type="button" class="password-toggle" onclick="togglePassword()">
                  <i class="ri-eye-line" id="toggle-icon"></i>
                </button>
              </div>
            </div>

            <button type="submit" class="btn-submit">
              <i class="ri-login-box-line"></i>
              Sign In
            </button>
          </form>

          <p class="login-footer">
            Don't have an account? 
            <a href="{% url 'accounts:register' %}">Create one</a>
          </p>
        </div>
      </div>
    </div>

    <script>
      function togglePassword() {
        const passwordInput = document.getElementById('password');
        const toggleIcon = document.getElementById('toggle-icon');
        
        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
          toggleIcon.className = 'ri-eye-off-line';
        } else {
          passwordInput.type = 'password';
          toggleIcon.className = 'ri-eye-line';
        }
      }
    </script>
  </body>
</html>
